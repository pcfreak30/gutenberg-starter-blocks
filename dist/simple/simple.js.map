{"version":3,"sources":["../../blocks/simple/simple.js"],"names":["wp","__","i18n","element","Fragment","createElement","blockEditor","InspectorControls","MediaUpload","RichText","InnerBlocks","components","PanelBody","RangeControl","el","blocks","registerBlockType","title","icon","category","attributes","imageCropHeight","type","default","imageId","imageUrl","imageCaption","source","selector","supports","html","anchor","align","edit","props","setAttributes","renderImage","renderProps","src","onClick","open","className","console","log","blockStructure","label","value","min","max","onChange","newValue","allowedTypes","onSelect","media","id","url","render","tagName","placeholder","save","content","window"],"mappings":"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","sourcesContent":["( function( wp ) {\r\n\r\n\tconst { __ }                                       = wp.i18n;\r\n\tconst { Fragment, createElement }                  = wp.element;\r\n\tconst { \r\n\t\tInspectorControls,\r\n\t\tMediaUpload,\r\n\t\tRichText,\r\n\t\tInnerBlocks\r\n\t} = wp.blockEditor;\r\n\tconst { PanelBody, RangeControl }        = wp.components;\r\n\r\n\t// this isn't strictly necessary but saves a lot of keystrokes below:\r\n\tconst el = createElement;\r\n\r\n\twp.blocks.registerBlockType( 'gutenberg-starter/simple-block', {\r\n\t\ttitle:    'Simple Block',\r\n\t\ticon:     'hammer',\r\n\t\tcategory: 'common',\r\n\t\tattributes: {\r\n\t\t\timageCropHeight: {\r\n\t\t\t\ttype:    'integer',\r\n\t\t\t\tdefault: 50\r\n\t\t\t},\r\n\t\t\timageId: {\r\n\t\t\t\ttype:    'integer',\r\n\t\t\t\tdefault: 0,\r\n\t\t\t},\r\n\t\t\timageUrl: {\r\n\t\t\t\ttype: 'string',\r\n\t\t\t\tdefault: ''\r\n\t\t\t},\r\n\t\t\timageCaption: {\r\n\t\t\t\ttype: 'string',\r\n\t\t\t\tsource: 'text',\r\n\t\t\t\tselector: 'figcaption'\r\n\t\t\t}\r\n\t\t},\r\n\t\tsupports: {\r\n\t\t\thtml:   false,\r\n\t\t\tanchor: true,\r\n\t\t\talign:  false\r\n\t\t},\r\n\r\n\t\tedit: function ( props ) {\r\n\r\n\t\t\tconst { attributes, setAttributes } = props;\r\n\r\n\t\t\tconst { imageCropHeight, imageId, imageUrl, imageCaption } = attributes;\r\n\r\n\t\t\tconst renderImage = function( renderProps ) {\r\n\r\n\t\t\t\tif ( imageId ) {\r\n\r\n\t\t\t\t\treturn el(\r\n\t\t\t\t\t\t'img',\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tsrc: imageUrl,\r\n\t\t\t\t\t\t\tonClick: renderProps.open\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\treturn el(\r\n\t\t\t\t\t\t'button',\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tclassName: 'select-card-btn',\r\n\t\t\t\t\t\t\tonClick: renderProps.open,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t__( 'Select Image', 'gutenberg-starter' )\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t};\r\n\r\n\t\t\tif ( imageCropHeight < 25 || imageCropHeight > 200 ) {\r\n\t\t\t\timageCropHeight = 50;\r\n\t\t\t}\r\n\r\n\t\t\tconsole.log( 'padding-top: ' + imageCropHeight + '%' );\r\n\r\n\t\t\tlet blockStructure = el(\r\n\t\t\t\t/**\r\n\t\t\t\t * This block has two components which must be wrapped in React's\r\n\t\t\t\t * Fragment component. The first component defines the attribute\r\n\t\t\t\t * panel (InspectorControls) and the second component defines the\r\n\t\t\t\t * block editor itself.\r\n\t\t\t\t */\r\n\t\t\t\tFragment,\r\n\t\t\t\tnull,\r\n\t\t\t\t[\r\n\t\t\t\t\tel(\r\n\t\t\t\t\t\tInspectorControls,\r\n\t\t\t\t\t\tnull,\r\n\t\t\t\t\t\t[\r\n\t\t\t\t\t\t\t// inside InspectorControls, you can have an array of panels\r\n\t\t\t\t\t\t\tel(\r\n\t\t\t\t\t\t\t\tPanelBody,\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t'title': __( 'Block Attribute Panel', 'gutenberg-starter' ),\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t[\r\n\t\t\t\t\t\t\t\t\t// inside each PanelBody, you create control components\r\n\t\t\t\t\t\t\t\t\t// https://developer.wordpress.org/block-editor/components/\r\n\t\t\t\t\t\t\t\t\tel(\r\n\t\t\t\t\t\t\t\t\t\tRangeControl,\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tlabel: 'Image Crop Ratio (%)',\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: imageCropHeight || 50,\r\n\t\t\t\t\t\t\t\t\t\t\tmin: 25,\r\n\t\t\t\t\t\t\t\t\t\t\tmax: 200,\r\n\t\t\t\t\t\t\t\t\t\t\tonChange: ( newValue ) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetAttributes( { imageCropHeight: newValue } );\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t// @todo : more advanced component examples will be added in a future version\r\n\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t),\r\n\r\n\t\t\t\t\t// here we start to define the block's DOM inside the editor, ...\r\n\t\t\t\t\t// div.wp-block-gutenberg-starter-simple\r\n\t\t\t\t\t// . div.wp-block-gutenberg-starter-simple__image\r\n\t\t\t\t\t// . . figure\r\n\t\t\t\t\t// . . . component: MediaUpload (Media library chooser)\r\n\t\t\t\t\t// . . . figcaption\r\n\t\t\t\t\t// . . . . component: RichText (content editor field)\r\n\t\t\t\t\t// . div.wp-block-gutenberg-starter-simple__content\r\n\t\t\t\t\t// . . component: InnerBlocks (a container for all blocks)\r\n\t\t\t\t\tel(\r\n\t\t\t\t\t\t'div',\r\n\t\t\t\t\t\t{ className: 'wp-block-gutenberg-starter-simple' },\r\n\t\t\t\t\t\t[\r\n\t\t\t\t\t\t\tel(\r\n\t\t\t\t\t\t\t\t'div',\r\n\t\t\t\t\t\t\t\t{ className: 'wp-block-gutenberg-starter-simple__image' },\r\n\t\t\t\t\t\t\t\t[\r\n\t\t\t\t\t\t\t\t\tel(\r\n\t\t\t\t\t\t\t\t\t\t'figure',\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tclassName: 'image-wrapper',\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t[\r\n\t\t\t\t\t\t\t\t\t\t\tel(\r\n\t\t\t\t\t\t\t\t\t\t\t\tMediaUpload,\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: 'imageSelector',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: attributes.imageId || null,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tallowedTypes: [ 'image' ],\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonSelect: function( media ) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tprops.setAttributes( {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\timageId: media.id,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\timageUrl: media.url\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} );\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\trender: renderImage\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t\tel(\r\n\t\t\t\t\t\t\t\t\t\t\t\tRichText,\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttagName: 'figcaption',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder: __( 'Write an image caption', 'gutenberg-starter' ),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: imageCaption || '',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange: ( newValue ) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetAttributes( { imageCaption: newValue } );\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\tel(\r\n\t\t\t\t\t\t\t\t'div',\r\n\t\t\t\t\t\t\t\t{ className: 'wp-block-gutenberg-starter-simple__content'},\r\n\t\t\t\t\t\t\t\t[ \r\n\t\t\t\t\t\t\t\t\tel(\r\n\t\t\t\t\t\t\t\t\t\tInnerBlocks,\r\n\t\t\t\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t)\r\n\t\t\t\t]\r\n\t\t\t);\r\n\r\n\t\t\treturn blockStructure;\r\n\t\t},\r\n\r\n\t\tsave: function( props ) {\r\n\r\n\t\t\tconst { attributes } = props;\r\n\r\n\t\t\treturn createElement(\r\n\t\t\t\t\"div\",\r\n\t\t\t\t{\r\n\t\t\t\t\tclassName: 'wp-block-gutenberg-starter-simple',\r\n\t\t\t\t},\r\n\t\t\t\tattributes.content\r\n\t\t\t);\r\n\r\n\t\t}\r\n\t} );\r\n\r\n}( window.wp ) );"],"file":"simple.js"}